{% extends "base.html" %}

{% block content %}


<div class="container">
  <div class="row">
    <div class="col-sm-5">
      <h2>Requested Documents</h2>
    </div>
  </div>
  <div class="row">
    <div class="col-sm-12">

  <ul class="list-group" style="margin-left:5px; max-height:1000px; height:1000px;">
    <li class="list-group-item">
      <table class="table">
        <thead>
          <tr>
            <th>Document Type</th>
            <th>Status</th>
            <th>Download Links</th>
            <th>Upload Document</th>
            <th>Notes</th>

          </tr>
        </thead>
        <tbody>
          {% for docs in document %}
            {% for i in docs %}
          <tr>
            <form method="post" action="/documents" enctype="multipart/form-data">

            <td> {{docs[i]['document_type']['document_type']}}
              <input value="{{docs[i]['document_type']['id']}}" name="type_id" hidden></input></td>
              <td>
            {% for state in docs[i]['document_type']['status'] %}
            <input value="{{state['id']}}" name="status_id" hidden></input>

            {{state['status']}}
            {% endfor %}
            </td>

            <td>
              {% for link in docs[i]['doc_url'] %}
                {% for i in link %}
              <a href="{{link[i]}}">{{i}}</a></br>
              {% endfor %}
              {% endfor %}
</td>
            <td>
              {% for notification in docs[i]['notification'] %}
              {{notification['bool']}}
              <input value="{{notification['bool']}}" name="notification" hidden></input>
      <input value="{{notification['id']}}" name="notification_id" hidden ></input>
              <input value="{{bucket_name}}" name="bucket_name" hidden></input>
              {% endfor %}

              <input type="file" name="file"></input>
              <p>Upload document</p>
              <button class="btn" onclick="myFunction()">Upload</button>
            </form>

              </td>

              <td>
                {% if docs[i]['document_type']['notes'] %}
      <div class="panel panel-default">
        <div class="panel-heading">
          <h4 class="panel-title">
            <a data-toggle="collapse" href="#{{docs[i]['document_type']['id']}}">notes</a>
          </h4>
        </div>
        <div id="{{docs[i]['document_type']['id']}}" class="panel-collapse collapse">
          <ul class="list-group">
          {% for note in docs[i]['document_type']['notes'] %}
          <li class="list-group-item">

            <div class="row">

              <div class="col-sm-3">
                <i>{{note['type']}}</i>
              </div>
              <div class="col-sm-9">

                {{note['note']}}
              </div>
            </div>

          </li></br>
          {% endfor %}
          </ul>
        </div>
      </div>
      {% endif %}
      <form method="post" action="/add-note">
          <div class="col-sm-9">
      <input type="text" name="note"></input></br></div>
      <input  value="{{docs[i]['document_type']['id']}}" name="type_id" hidden></input>
      <input value="{{bucket_name}}" name="bucket_name" hidden></input>
        <div class="col-sm-3">
      <button class="btn btn-sm" type="submit">Add</button></div>
      </form>
              </td>
          </tr>
           {% endfor %}
          {% endfor %}
        </tbody>

      </table>
    </li>
  </ul>
    </div>

    </div>



  </div>


<script>
function myFunction() {
    var x = document.getElementById("myFile");
    x.disabled = true;
}
</script>
{% endblock %}
