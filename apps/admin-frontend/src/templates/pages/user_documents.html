{% extends "base.html" %}

{% block content %}


<div class="container">
  <div class="row">
    <div class="col-sm-12">
      <table class="table">
        <thead>
          <tr>
            <th>Document Type</th>
            <th>Required?</th>
            <th>Status</th>
            <th>Download Links</th>
            <th>Add Note</th>
            <th>upload</th>
            <th>&nbsp;</th>
            </tr>
        </thead>
        <tbody>
          {% for doc in types %}

          <tr>
            <form method="POST" action="/post-status">
              <input value="{{bucket_name}}" name="bucket_name" hidden></input>

            <td>
            <input  value="{{doc['id']['id']}}" name="documentid" hidden>{{doc['document_type']}}</input>

          </td>
          <td>
              <button class="btn" type="submit">Request</button>
            </td>
          <td>
            <input  value="{{doc['status']['id']}}" name="status_id" hidden></input>
            <input  value="{{doc['status']['status']}}" name="status" hidden>{{doc['status']['status']}}</input>
          </td>
        </form>

          <td>
            {% for url in doc['doc_url'] %}
            <a href="{{url['url']}}"> Download link</a></br>
            {% endfor %}
          <!--  <form method="POST" action="/delete-document/{{doc}}/{{bucket_name}}">
          <input type="submit" value="Delete"></input>
        </form> -->
        </td>
          <td>
            {% if doc['notes'] %}
  <div class="panel panel-default">
    <div class="panel-heading">
      <h4 class="panel-title">
        <a data-toggle="collapse" href="#{{doc['id']['id']}}">notes</a>
      </h4>
    </div>
    <div id="{{doc['id']['id']}}" class="panel-collapse collapse">
      <ul class="list-group">
        {% for note in doc['notes'] %}
      <li class="list-group-item">{{note['note']['note']}}</li></br>
      {% endfor %}
      </ul>
    </div>
  </div>
  {% endif %}

            <form method="post" action="/add-note">
            <input type="text" name="note"></input></br>
            <input  value="{{doc['id']['id']}}" name="type_id" hidden></input>
            <input value="{{bucket_name}}" name="bucket_name" hidden></input>
            <button class="btn" type="submit">Add</button>
            </form>
          </td>
          <td>
          <form method="post" action="/post-document" enctype="multipart/form-data">
          <input type="file" name="file"></input></br>
          <input  value="{{doc['id']['id']}}" name="type_id" hidden></input>
          <input value="{{bucket_name}}" name="bucket_name" hidden></input>
          <button class="btn" onclick="myFunction()">Upload</button>
          </form>
          </td>

          <td>
            <form method="post" action="/accept-doc">
                <input  value="{{doc['status']['id']}}" name="status_id" hidden></input>
            <input  value="{{doc['id']['id']}}" name="type_id" hidden></input>
            <input value="{{bucket_name}}" name="bucket_name" hidden></input>
              <button class="btn" type="submit">Accept</button>
            </form>
            </td>
          </tr>

          {% endfor %}
        </tbody>

      </table>
    </div>
  </div>



  </div>

<script>
function myFunction() {
    var x = document.getElementById("myFile");
    x.disabled = true;
}
</script>


{% endblock %}
